<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PDFmorph Tutorial &mdash; diffpy.pdfmorph 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=f539c95a"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="License" href="license.html" />
    <link rel="prev" title="diffpy.pdfmorph documentation" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            diffpy.pdfmorph
          </a>
              <div class="version">
                0.0.1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">PDFmorph Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="release.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/diffpy.pdfmorph.html">Package API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">diffpy.pdfmorph</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">PDFmorph Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/quickstart.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pdfmorph-tutorial">
<span id="quick-start"></span><h1>PDFmorph Tutorial<a class="headerlink" href="#pdfmorph-tutorial" title="Link to this heading"></a></h1>
<p>Welcome! This will be a quick tutorial to accquaint users with PDFmorph
and some of what it can do. For a more detailed tutorial, check out
our <a class="reference download internal" download="" href="_downloads/455760c5d9bd673f8e4565edb5dc6bf8/pdfmorph.pdf"><code class="xref download docutils literal notranslate"><span class="pre">user</span> <span class="pre">manual</span></code></a>.</p>
<p>As we described in the README and installation instructions, please make
sure that you are familiar with working with your command line terminal
before using this application.</p>
<p>Before you’ve started this tutorial, please ensure that you’ve installed
all necessary software and dependencies.</p>
<section id="basic-pdfmorph-workflow">
<h2>Basic PDFmorph Workflow<a class="headerlink" href="#basic-pdfmorph-workflow" title="Link to this heading"></a></h2>
<blockquote>
<div><ol class="arabic">
<li><p>Open your Terminal or Command Prompt.</p></li>
<li><p>If it’s not active already, activate your PDFmorph-equipped
conda environment by typing in</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">activate</span> <span class="o">&lt;</span><span class="n">pdfmorph_env</span><span class="o">&gt;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>If you need to list your available conda environments,
run the command <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">info</span> <span class="pre">--envs</span></code> or
<code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">list</span></code></p></li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">pdfmorph</span> <span class="pre">--help</span></code> command and read over the
info on that page for a brief overview of some of what we will
explore in this tutorial.</p></li>
</ul>
</li>
<li><p>Using the <code class="docutils literal notranslate"><span class="pre">mkdir</span></code> command, create a directory where you’ll
store the tutorial PDF files and use the <code class="docutils literal notranslate"><span class="pre">cd</span></code> command to change
into that directory. You can download the tutorial files
<a class="reference download internal" download="" href="_downloads/c81678c9bef61f0389d289c7ea551642/tutorialData.zip"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.
Then, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into the <code class="docutils literal notranslate"><span class="pre">tutorialData</span></code> directory.</p>
<ul class="simple">
<li><p>The files in this dataset were collected by Soham Banerjee
at Brookhaven National Laboratory in Upton, New York.</p></li>
<li><p>The files are PDF data collected on Iridium Telluride with
20% Rhodium Doping (IrRhTe2) with the first file (01) collected
at 10K and the last (44) at 300K. The samples increase in
temperature as their numbers increase. The “C” in their names
indicates that they have undergone cooling.</p></li>
<li><p>Note that these files have the <code class="docutils literal notranslate"><span class="pre">.gr</span></code> extension, which
indicates that they are measured PDFs. The <code class="docutils literal notranslate"><span class="pre">.cgr</span></code> file
extension indicates that a file is a calculated PDF, such as
those generated by the <a class="reference external" href="https://www.diffpy.org/products/pdfgui.html">PDFgui</a>
program.</p></li>
</ul>
</li>
<li><p>First, we will run the PDFmorph application without any morphing
and only using one PDF. Type the following command into your
command line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>This should produce two PDF curves which are congruent, resulting
in a flat green line underneath them.</p>
</li>
<li><p>Now, we will see PDFmorph run with two different PDFs and no
morphing. Type the following command into your command line</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>Without morphing, the difference Rw = 0.407. This indicates that
the two PDFs vary drastically.</p>
<ul class="simple">
<li><p>While running the <code class="docutils literal notranslate"><span class="pre">pdfmorph</span></code> command, it is important
to remember that the first PDF file argument you provide
(in this case, <code class="docutils literal notranslate"><span class="pre">darkSub_rh20_C_01.gr</span></code>) is the PDF which
will get morphed, while the second PDF file argument you
provide (here, <code class="docutils literal notranslate"><span class="pre">darkSub_rh20_C_44.gr</span></code>) is the PDF which
acts as the model and does not get morphed. Hereinafter,
we will refer to the first PDF argument as the “morph”
and the second as the “target”, as the PDFmorph display
does.</p></li>
</ul>
</li>
<li><p>Now, we will start the morphing process, which requires us to
provide initial guesses for our scaling factor, Gaussian smear,
and stretch, separately. We will start with the scaling factor.
Begin by typing the command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mi">2</span> <span class="o">-</span><span class="n">a</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>Now, the difference Rw = 1.457, a significant increase from our
value previously. We must modify our initial value for the
scaling factor and do so until we see a reduction in the
difference Rw from the unmorphed value. Type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.9</span> <span class="o">-</span><span class="n">a</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>The difference Rw is now 0.351, lower than our unmorphed
example’s value. To see PDFmorph optimize the scale factor,
simply drop <code class="docutils literal notranslate"><span class="pre">-a</span></code> from the command and type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.9</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>PDFmorph, given a reasonable initial guess, will use find the
optimal value for each morphing feature. Here, we see that
PDFmorph displays <code class="docutils literal notranslate"><span class="pre">scale</span> <span class="pre">=</span> <span class="pre">0.799025</span></code> in the command prompt,
meaning that it has found this to be the most optimal value for
the scale factor. The difference Rw = 0.330, indicating a
better fit than our reasonable initial guess.</p>
<ul class="simple">
<li><p>It is the choice of the user whether or not to run values
before removing <code class="docutils literal notranslate"><span class="pre">-a</span></code> when analyzing data with PDFmorph.
By including it, you allow the possibility to move towards
convergence before allowing the program to optimize by
removing it; when including it, you may reach a highly
optimized value on the first guess or diverge greatly.
In this tutorial, we will use it every time to check
for convergence.</p></li>
</ul>
</li>
<li><p>Now, we will examine the Gaussian smearing factor. We provide an
initial guess by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.8</span> <span class="o">--</span><span class="n">smear</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">-</span><span class="n">a</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>And viewing the results. We’ve tailored our scale factor to be
close to the value given by PDFmorph, but see that the difference
Rw has increased substantially due to our smear value. One
approach, as described above, is to remove the <code class="docutils literal notranslate"><span class="pre">-a</span></code> from the
above command and run it again.</p>
<ul class="simple">
<li><p>Note: The warnings that the Terminal/Command Prompt
displays are largely numerical in nature and do not
indicate a physically irrelevant guess. These are somewhat
superficial and in most cases can be ignored.</p></li>
</ul>
<p>We see that this has had hardly any effect on our PDF. To see
an effect, we restrict the <code class="docutils literal notranslate"><span class="pre">rmin</span></code> and <code class="docutils literal notranslate"><span class="pre">rmax</span></code> values to
reflect relevant data range by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.8</span> <span class="o">--</span><span class="n">smear</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">--</span><span class="n">rmin</span><span class="o">=</span><span class="mf">1.5</span> <span class="o">--</span><span class="n">rmax</span><span class="o">=</span><span class="mi">30</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>Now, we see that the difference Rw = 0.204 and that the optimized
<code class="docutils literal notranslate"><span class="pre">smear=-0.084138</span></code>.</p>
<ul class="simple">
<li><p>We restricted the r values because some of the Gaussian
smear effects are only visible in a fixed r range. We
chose this r range by noting where most of our relevant
data was that was not exponentially decayed by
instrumental shortcomings.</p></li>
</ul>
</li>
</ol>
<p>We are getting closer to an acceptably close fit to our data!</p>
<ol class="arabic" start="8">
<li><p>Finally, we will examine the stretch factor. Provide an intial
guess by typing</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.8</span> <span class="o">--</span><span class="n">smear</span><span class="o">=-</span><span class="mf">0.08</span> <span class="o">--</span><span class="n">stretch</span><span class="o">=</span><span class="mf">0.5</span> <span class="o">--</span><span class="n">rmin</span><span class="o">=</span><span class="mf">1.5</span> <span class="o">--</span><span class="n">rmax</span><span class="o">=</span><span class="mi">30</span> <span class="o">-</span><span class="n">a</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>And noting that the difference has increased. Before continuing,
see if you can see which direction (higher or lower) our initial
estimate for the stretch factor needs to go and then removing
the <code class="docutils literal notranslate"><span class="pre">-a</span></code> to check optimized value!</p>
<p>If you cannot, type</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mf">0.8</span> <span class="o">--</span><span class="n">smear</span><span class="o">=-</span><span class="mf">0.08</span> <span class="o">--</span><span class="n">stretch</span><span class="o">=</span><span class="mf">0.005</span> <span class="o">--</span><span class="n">rmin</span><span class="o">=</span><span class="mf">1.5</span> <span class="o">--</span><span class="n">rmax</span><span class="o">=</span><span class="mi">30</span> <span class="o">-</span><span class="n">a</span> <span class="n">darkSub_rh20_C_01</span><span class="o">.</span><span class="n">gr</span> <span class="n">darkSub_rh20_C_44</span><span class="o">.</span><span class="n">gr</span>
</pre></div>
</div>
<p>to observe decreased difference and then remove <code class="docutils literal notranslate"><span class="pre">-a</span></code> to see
the optimized <code class="docutils literal notranslate"><span class="pre">--stretch=0.001762</span></code>. We have now reached
the optimal fit for our PDF!</p>
</li>
<li><p>Now, try it on your own! If you have personally collected or
otherwise readily available PDF data, try this process to see if
you can morph your PDFs to one another. Many of the parameters
provided in this tutorial are unique to it, so be cautious about
your choices and made sure that they remain physically relevant.</p></li>
</ol>
</div></blockquote>
<p>Enjoy the software!</p>
</section>
<section id="extra-tutorials">
<h2>Extra Tutorials<a class="headerlink" href="#extra-tutorials" title="Link to this heading"></a></h2>
<p>PDFmorph has some more functionalities not showcased in the basic workflow above
(see <cite>pdfmorph –help</cite> for an overview of these functionalities).
Tutorials for these additional functionalities are included below. Additional
files for these tutorials can be downloaded
<a class="reference download internal" download="" href="_downloads/8dd70104405f43d31c22866f684b6a94/additionalData.zip"><code class="xref download docutils literal notranslate"><span class="pre">here</span></code></a>.</p>
<section id="performing-multiple-morphs">
<h3>Performing Multiple Morphs<a class="headerlink" href="#performing-multiple-morphs" title="Link to this heading"></a></h3>
<p>It may be useful to morph a PDF against multiple targets:
for example, you may want to morph a PDF against multiple PDFs measured
at various temepratures to determine whether a phase change has occured.
PDFmorph currently allows users to morph a PDF against all files in a
selected directory and plot resulting <span class="math notranslate nohighlight">\(R_w\)</span> values from each morph.</p>
<ol class="arabic">
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">additionalData</span></code> directory, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into the <code class="docutils literal notranslate"><span class="pre">morphMultiple</span></code> directory.
Inside, you will find multiple PDFs of <span class="math notranslate nohighlight">\(SrFe_2As_2\)</span> measured at various temperatures.
These PDFs are from <a class="reference external" href="https://github.com/Billingegroup/pdfttp_data/">“Atomic Pair Distribution Function Analysis: A primer”</a>.</p></li>
<li><p>Let us start by getting the Rw of <code class="docutils literal notranslate"><span class="pre">SrFe2As2_150K.gr</span></code> compared to all other files in the
directory. Run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">SrFe2As2_150K</span><span class="o">.</span><span class="n">gr</span> <span class="o">.</span> <span class="o">--</span><span class="n">multiple</span>
</pre></div>
</div>
<p>The multiple tag indicates we are comparing PDF file (first input) against all PDFs in
a directory (second input). Our choice of file was <code class="docutils literal notranslate"><span class="pre">SeFe2As2_150K.gr</span></code>
and directory was the cwd, which should be <code class="docutils literal notranslate"><span class="pre">morphMultiple</span></code>.</p>
</li>
<li><p>After running this, we get chart of Rw values for each target file. However, this chart can
be a bit confusing to interpret. To get a more understandable plot, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">SrFe2As2_150K</span><span class="o">.</span><span class="n">gr</span> <span class="o">.</span> <span class="o">--</span><span class="n">multiple</span> <span class="o">--</span><span class="n">sort</span><span class="o">-</span><span class="n">by</span><span class="o">=</span><span class="n">temperature</span>
</pre></div>
</div>
<p>This plots the Rw against the temperature parameter value provided at the top of each file.
Parameters are entries of the form <code class="docutils literal notranslate"><span class="pre">&lt;parameter_name&gt;</span> <span class="pre">=</span> <span class="pre">&lt;parameter_value&gt;</span></code> and are located
above the <code class="docutils literal notranslate"><span class="pre">r</span></code> versus <code class="docutils literal notranslate"><span class="pre">gr</span></code> table in each PDF file.</p>
</li>
<li><p>Between 192K and 198K, the Rw has a sharp increase, indicating that we may have a phase change.
To confirm, let us now apply morphs onto <code class="docutils literal notranslate"><span class="pre">SrFe2As2_150K.gr</span></code> with all other files in <code class="docutils literal notranslate"><span class="pre">morphMultiple</span></code>
as targets</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="o">--</span><span class="n">scale</span><span class="o">=</span><span class="mi">1</span> <span class="o">--</span><span class="n">stretch</span><span class="o">=</span><span class="mi">0</span> <span class="n">SrFe2As2_150K</span><span class="o">.</span><span class="n">gr</span> <span class="o">.</span> <span class="o">--</span><span class="n">multiple</span> <span class="o">--</span><span class="n">sort</span><span class="o">-</span><span class="n">by</span><span class="o">=</span><span class="n">temperature</span>
</pre></div>
</div>
<p>Note that we are not applying a smear since it takes a long time to apply and does not significantly
change the Rw values in this example.</p>
</li>
<li><p>We should now see a sharper increase in Rw between 192K and 198K.</p></li>
<li><p>Go back to the terminal to see optimized morphing parameters from each morph.</p></li>
<li><p>On the morph with <code class="docutils literal notranslate"><span class="pre">SrFe2As2_192K.gr</span></code> as target, <code class="docutils literal notranslate"><span class="pre">scale</span> <span class="pre">=</span> <span class="pre">0.972085</span></code> and <code class="docutils literal notranslate"><span class="pre">stretch</span> <span class="pre">=</span> <span class="pre">0.000508</span></code>
and with <code class="docutils literal notranslate"><span class="pre">SrFe2As2_198K.gr</span></code> as target, <code class="docutils literal notranslate"><span class="pre">scale</span> <span class="pre">=</span> <span class="pre">0.970276</span></code> and <code class="docutils literal notranslate"><span class="pre">stretch</span> <span class="pre">=</span> <span class="pre">0.000510</span></code>.
These are very similar, meaning that thermal lattice expansion (accounted for by <code class="docutils literal notranslate"><span class="pre">stretch</span></code>)
is not occurring. This, coupled with the fact that the Rw significantly increases suggests
a phase change in this temperature regime. (In fact, <span class="math notranslate nohighlight">\(SrFe_2As_2\)</span> does transition from
orthorhombic at lower temperature to tetragonal at higher temperature!)</p></li>
</ol>
</section>
<section id="nanoparticle-shape-effects">
<h3>Nanoparticle Shape Effects<a class="headerlink" href="#nanoparticle-shape-effects" title="Link to this heading"></a></h3>
<p>A nanoparticle’s finite size and shape can affect the shape of its PDF.
We can use PDFmorph to morph a bulk material PDF to simulate these shape effects.
Currently, the supported nanoparticle shapes include: spheres and spheroids.</p>
<ul>
<li><p>Within the <code class="docutils literal notranslate"><span class="pre">additionalData</span></code> directory, <code class="docutils literal notranslate"><span class="pre">cd</span></code> into the <code class="docutils literal notranslate"><span class="pre">morphShape</span></code> subdirectory.
Inside, you will find a sample Ni bulk material PDF <code class="docutils literal notranslate"><span class="pre">Ni_bulk.gr</span></code>.
This PDF is from <a class="reference external" href="https://github.com/Billingegroup/pdfttp_data/">“Atomic Pair Distribution Function Analysis: A primer”</a>.
There are also multiple <code class="docutils literal notranslate"><span class="pre">.cgr</span></code> files with calculated Ni nanoparticle PDFs.</p></li>
<li><p>Let us apply various shape effect morphs on the bulk material to reproduce these calculated PDFs.</p>
<blockquote>
<div><ul>
<li><dl>
<dt>Spherical Shape</dt><dd><ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Ni_nano_sphere.cgr</span></code> file contains a generated spherical nanoparticle with unknown radius.
First, let us plot <code class="docutils literal notranslate"><span class="pre">Ni_blk.gr</span></code> against <code class="docutils literal notranslate"><span class="pre">Ni_nano_sphere.cgr</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_bulk</span><span class="o">.</span><span class="n">gr</span> <span class="n">Ni_nano_sphere</span><span class="o">.</span><span class="n">cgr</span>
</pre></div>
</div>
<p>Despite the two being the same material, the Rw is quite large.
To reduce the Rw, we will apply spherical shape effects onto the PDF.
However, in order to do so, we first need the radius of the spherical nanoparticle.</p>
</li>
<li><p>To get the radius, we can first observe a plot of <code class="docutils literal notranslate"><span class="pre">Ni_nano_sphere.cgr</span></code></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_nano_sphere</span><span class="o">.</span><span class="n">cgr</span> <span class="n">Ni_nano_sphere</span><span class="o">.</span><span class="n">cgr</span>
</pre></div>
</div>
</li>
<li><p>Nanoparticles tend to have broader peaks at r-values larger than the particle size,
corresponding to the much weaker correlations between molecules.
On our plot, beyond r=22.5, peaks are too broad to be visible,
indicating our particle size to be about 22.4.
The approximate radius of a sphere would be half of that, or 11.2.</p></li>
<li><p>Now, we are ready to perform a morph applying spherical effects. To do so, we use the <code class="docutils literal notranslate"><span class="pre">--radius</span></code> parameter</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_bulk</span><span class="o">.</span><span class="n">gr</span> <span class="n">Ni_nano_sphere</span><span class="o">.</span><span class="n">cgr</span> <span class="o">--</span><span class="n">radius</span><span class="o">=</span><span class="mf">11.2</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
</li>
<li><p>We can see that the Rw value has significantly decreased from before. Run without the <code class="docutils literal notranslate"><span class="pre">-a</span></code> tag to refine</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_bulk</span><span class="o">.</span><span class="n">gr</span> <span class="n">Ni_nano_sphere</span><span class="o">.</span><span class="n">cgr</span> <span class="o">--</span><span class="n">radius</span><span class="o">=</span><span class="mf">11.2</span>
</pre></div>
</div>
</li>
<li><p>After refining, we see the actual radius of the nanoparticle was closer to 12.</p></li>
</ol>
</dd>
</dl>
</li>
<li><dl>
<dt>Spheroidal Shape</dt><dd><ol class="arabic">
<li><p>The <code class="docutils literal notranslate"><span class="pre">Ni_nano_spheroid.cgr</span></code> file contains a calculated spheroidal Ni nanoparticle.
Again, we can begin by plotting the bulk material against our nanoparticle</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_bulk</span><span class="o">.</span><span class="n">gr</span> <span class="n">Ni_nano_spheroid</span><span class="o">.</span><span class="n">cgr</span>
</pre></div>
</div>
</li>
<li><p>Inside the <code class="docutils literal notranslate"><span class="pre">Ni_nano_spheroid.cgr</span></code> file, we are given that the equatorial radius is 12 and polar radius is 6.
This is enough information to define our spheroid. To apply spheroid shape effects onto our bulk, run</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pdfmorph</span> <span class="n">Ni_bulk</span><span class="o">.</span><span class="n">gr</span> <span class="n">Ni_nano_spheroid</span><span class="o">.</span><span class="n">cgr</span> <span class="o">--</span><span class="n">radius</span><span class="o">=</span><span class="mi">12</span> <span class="o">--</span><span class="n">pradius</span><span class="o">=</span><span class="mi">6</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>Note that the equitorial radius corresponds to the <code class="docutils literal notranslate"><span class="pre">--radius</span></code> parameter and polar radius to <code class="docutils literal notranslate"><span class="pre">--pradius</span></code>.</p>
</li>
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">-a</span></code> tag to refine.</p></li>
</ol>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</li>
</ul>
<p>There is also support for morphing from a nanoparticle to a bulk. When applying the inverse morphs,
it is recommended to set <code class="docutils literal notranslate"><span class="pre">--rmax=psize</span></code> where <code class="docutils literal notranslate"><span class="pre">psize</span></code> is the longest diameter of the nanoparticle.</p>
</section>
</section>
<section id="bug-reports">
<h2>Bug Reports<a class="headerlink" href="#bug-reports" title="Link to this heading"></a></h2>
<p>Please enjoy using our software! If you come accross any bugs in the
application, please report them to <a class="reference external" href="mailto:diffpy-users&#37;&#52;&#48;googlegroups&#46;com">diffpy-users<span>&#64;</span>googlegroups<span>&#46;</span>com</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="diffpy.pdfmorph documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="license.html" class="btn btn-neutral float-right" title="License" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, The Trustees of Columbia University in the City of New York.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>